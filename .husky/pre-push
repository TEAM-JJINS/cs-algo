#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

BRANCH_NAME=$(git rev-parse --abbrev-ref HEAD)

# ì˜ˆì™¸ ë¸Œëœì¹˜: main, develop, release*
if echo "$BRANCH_NAME" | grep -Eq '^(main|develop|release.*)$'; then
  echo "â„¹ï¸ ì‹œìŠ¤í…œ ë¸Œëœì¹˜('$BRANCH_NAME')ëŠ” ë„¤ì´ë° ê·œì¹™ ê²€ì‚¬ë¥¼ ê±´ë„ˆëœë‹ˆë‹¤."
  exit 0
fi

# ë¸Œëœì¹˜ëª… ê·œì¹™: type#123/description
BRANCH_REGEX="^(feature|fix|hotfix|release|refactor|chore)#[0-9]+/[a-z0-9\-]+$"

if ! echo "$BRANCH_NAME" | grep -Eq "$BRANCH_REGEX"; then
  echo "âŒ ë¸Œëœì¹˜ ì´ë¦„ ê·œì¹™ ìœ„ë°˜: '$BRANCH_NAME'"
  echo "   âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ: feature#123/login-api, fix#456/null-check"
  echo "ğŸš« í‘¸ì‹œê°€ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œëœì¹˜ëª…ì„ ë³€ê²½ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”."
  exit 1
fi

echo "âœ… ë¸Œëœì¹˜ ì´ë¦„ ê²€ì¦ í†µê³¼: '$BRANCH_NAME'"
exit 0
